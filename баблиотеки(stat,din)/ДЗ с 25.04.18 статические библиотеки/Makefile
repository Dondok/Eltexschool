#Makefile for calc

#Опция -L указывает линковщику, где ему искать библиотеку.
#В случае, если библиотека располагается в каталоге /lib или /usr/lib
#то вопрос отпадает сам собой и опция -L не требуется.
#-L. точка означает текущий каталог
# сначала компилируются цели main.o libcalc.a
a.out: libcalc.a
	gcc main.c -o a.out -lcalc -L.


#команда ar создает статическую библиотеку (архив). В нашем случае четыре 
#объектных файла объединяются в один файл libcalc.a.
#В Linux практически все библиотеки имеют префикс lib.
#Параметры ar:
#r - предписывает заменять старые версии объектных файлов новыми - необходим для переупаковки библиотеки;
#c - создать статическую библиотеку, если та еще не существует.
#так же как и в a.out сначала выполняются цели цели sum.o dif.o div.o mult.o
libcalc.a: sum.o dif.o div.o mult.o
	ar cr libcalc.a sum.o dif.o div.o mult.o

#создание объектных файлов
sum.o:
	gcc -c sum.c
dif.o:
	gcc -c dif.c
div.o:
	gcc -c div.c
mult.o:
	gcc -c mult.c
